<p id="notice"><%= notice %></p>

<p>
  <strong>Image:</strong>
  <%= image_tag @post.image, :alt => "Post Image" %>
</p>

<p>
  <strong>Caption:</strong>
  <%= @post.caption %>
</p>

<p>
  <strong>User:</strong>
  <!-- Inefficient code right here. Fix later and observe performance difference -->
  <% if @user %>
    <td><%= link_to @user.username, @user %></td>
  <% else %>
    <td>Anonymous</td>
  <% end %>
</p>

<p>
  <strong>Comments:</strong>
  <%= render 'showcomments', post: @post %>
</p>

<%= form_with scope: :comment, url: comments_path(@comments), local: true do |form| %>
  <div class="field">
    <%= form.hidden_field :post_id, value: @post.id %>
  </div>

  <div class="field">
    <%= form.label :comment %>
    <%= form.text_area :comment %>
  </div>

  <div class="actions">
    <%= form.submit "Add Comment" %>
  </div>
<% end %>

<%= link_to_if(current_user, 'Edit', edit_post_path(@post)){} %>
<%= link_to 'Back', posts_path %>
